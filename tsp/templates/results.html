{% extends 'base.html' %}

{% block content %}

{% load static %}

<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>Seek Results</title>
	</head>
	<body class="second">
		<div class="top-bar">
        	<form method="GET" action="/search/"></form>
            	<a href="/">
                	<img src="{% static 'assets/logo.svg'%}" alt="Thunder" class="left" href="">
              	</a>
              	<input type="text" id="resultsInput" class="query" name="query" placeholder="Search Trine resources...">
              	<div id="left">
            		<input type="submit" id="search_button" class="btn" name="search" value="search">
              	</div>
			  </form>
			  <button id ="toggle" class="btn-toggle">light</button>
      	</div>
      	<div class="results">
            {% if results %}
                {% for result in results %}
                    <div class='result'>
                        <tr>
                            <url><td>{{ result.url }}</td></url>
                            <td><a href= "{{ result.url }}"><title-result></br>{{ result.title }}</td></title-result></a>
                            <td></br><info><td>{{ result.description }}</td></info>
                    </div>
                {% endfor %}
            {% else %}
                    <div class='result'>
                        No results found for "{{query}}". Please try again with different keywords.
                    </div>
            {% endif %}
    	</div>

      <script>
          let root = document.documentElement;

          function suggest() {

          }

          const btn = document.querySelector(".btn-toggle");
          const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

          const currentTheme = localStorage.getItem("theme");
          if (currentTheme == "dark") {
              document.body.classList.toggle("dark-theme");
              dark();
          } else if (currentTheme == "light") {
              document.body.classList.toggle("light-theme");
              light();
          }

          btn.addEventListener("click", function () {
              document.body.classList.toggle("dark-theme");
              if (document.body.classList.contains("dark-theme")) {
                  dark();
              }
              else {
                  light();
              }
              var theme = document.body.classList.contains("dark-theme")
                  ? "dark"
                  : "light";
              localStorage.setItem("theme", theme);
          });

          function light() {
              document.getElementById("toggle").innerHTML = "light";
              root.style.setProperty('--main-bg-color', 'lightblue');
              root.style.setProperty('--toggle-button-color', 'white');
              root.style.setProperty('--toggle-button-text-color', 'black');
              root.style.setProperty('--second-bg-color', 'white');
              root.style.setProperty('--search-bar', 'white')
              root.style.setProperty('--main-text', 'black')
              root.style.setProperty('--info-text', '#4d5156')
              root.style.setProperty('--url-text', '#202124')
              root.style.setProperty('--title-text', 'black')
              root.style.setProperty('--title-text-hover', 'blue')
              root.style.setProperty('--title-text-visit', 'purple')
              root.style.setProperty('--padding-color', '#f1f5ff')
          }

          function dark() {
              document.getElementById("toggle").innerHTML = "dark";
              root.style.setProperty('--main-bg-color', 'black');
              root.style.setProperty('--toggle-button-color', 'black');
              root.style.setProperty('--toggle-button-text-color', 'white');
              root.style.setProperty('--second-bg-color', '#36393f');
              root.style.setProperty('--search-bar', '#202225')
              root.style.setProperty('--main-text', 'white')
              root.style.setProperty('--info-text', '#b4b6b9')
              root.style.setProperty('--url-text', 'white')
              root.style.setProperty('--title-text', 'white')
              root.style.setProperty('--title-text-hover', 'lightblue')
              root.style.setProperty('--title-text-visit', '#ffb9fe')
              root.style.setProperty('--padding-color', '#2a3547')

          }

      </script>

</body>
</html>


{% endblock %}